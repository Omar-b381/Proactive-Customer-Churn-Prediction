# 🚀 مشروع التنبؤ الاستباقي بمغادرة العملاء (Proactive Customer Churn Prediction)

**ملف README هذا هو وثيقة فنية شاملة توضح بالتفصيل عملية بناء، تقييم، ونشر نموذج تعلم آلي قادر على تحديد العملاء الأكثر عرضة لمغادرة الخدمة.**

## 📖 جدول المحتويات

- [نظرة عامة على المشروع](#-نظرة-عامة-على-المشروع)
- [المشكلة التي يحلها](#-المشكلة-التي-يحلها)
- [التقنيات المستخدمة (Tech Stack)](#-التقنيات-المستخدمة-tech-stack)
- [خطوات المشروع وقراراته الهندسية](#-خطوات-المشروع-وقراراته-الهندسية)
- [كيفية تشغيل المشروع](#-كيفية-تشغيل-المشروع)
- [الدافع وراء المشروع](#-الدافع-وراء-المشروع)
- [أبرز التحديات والحلول](#-أبرز-التحديات-والحلول)
- [النتائج والتأثير](#-النتائج-والتأثير)
- [الاستخدام المقصود](#-الاستخدام-المقصود)
- [القيود والتحسينات المستقبلية](#-القيود-والتحسينات-المستقبلية)
- [الحقوق والترخيص](#-الحقوق-والترخيص)

---

## 🌎 نظرة عامة على المشروع

هذا المشروع هو عبارة عن بناء خط أنابيب (pipeline) متكامل لعلوم البيانات، يهدف إلى تحليل سلوك عملاء شركة اتصالات، وبناء نموذج تصنيف (Classification Model) يمكنه التنبؤ بدقة **"ما إذا كان العميل سيغادر الخدمة (Churn) أم لا"** خلال الفترة القادمة.

المنتج النهائي ليس مجرد تحليل، بل هو نموذج تعلم آلي (`rf_churn_model.pkl`) جاهز للاستخدام، يمكنه تقديم تنبؤات فورية لاحتمالية مغادرة أي عميل.

## 🎯 المشكلة التي يحلها

يُعد "توقف العملاء عن استخدام الخدمة" (Customer Churn) أحد أكبر التحديات التي تواجه الشركات القائمة على الاشتراكات (مثل شركات الاتصالات). التكلفة المرتفعة لاكتساب عميل جديد (Customer Acquisition Cost) تجعل من الحفاظ على العملاء الحاليين (Retention) أولوية استراتيجية.

هذا المشروع يحل المشكلة عن طريق:
1.  **الانتقال من رد الفعل إلى الاستباقية:** بدلاً من تحليل سبب مغادرة العملاء *بعد* مغادرتهم، نقوم بالتنبؤ بهم *قبل* أن يغادروا.
2.  **توفير رؤى قابلة للتنفيذ:** يحدد النموذج العوامل الرئيسية التي تدفع العملاء للرحيل (مثل `Complaints` و `Call Failure`)، مما يسمح للشركة بإصلاح المشاكل من جذورها.

---

## 🛠️ التقنيات المستخدمة (Tech Stack)

تم اختيار الأدوات التالية لضمان الدقة، القابلية للتفسير، والأداء القوي.

| التقنية | الدور (لماذا تم اختيارها؟) |
| :--- | :--- |
| **Python 3.10+** | اللغة الأساسية لعلوم البيانات والتعلم الآلي. |
| **Pandas** | لتنظيف ومعالجة وهندسة الميزات (Feature Engineering) للبيانات. |
| **Matplotlib & Seaborn** | لتحليل البيانات الاستكشافي (EDA)، خاصة لإنشاء `Violin Plots` لفهم توزيع الميزات. |
| **Scikit-learn** | المكتبة الأساسية لبناء النماذج وتقييمها. |
| **Logistic Regression** | استُخدم كنموذج أساس (Baseline) لفهم العلاقات الخطية وتأثير الميزات الأولية. |
| **Decision Tree** | استُخدم لاختبار الأنماط غير الخطية، ولكنه أظهر Overfitting. |
| **Random Forest (النموذج الفائز)** | **(Champion Model)**. تم اختياره لقدرته الفائقة على التعامل مع العلاقات المعقدة، ومقاومته للـ Overfitting (مقارنة بـ DTC)، وحصانته ضد القيم المتطرفة (Outliers). |
| **Joblib** | لحفظ (Serialization) النموذج النهائي المدرب، لجعله جاهزًا للاستخدام في بيئة الإنتاج (Prediction). |

---

## 🗺️ خطوات المشروع وقراراته الهندسية

مر المشروع بعدة مراحل حاسمة، تم فيها اتخاذ قرارات هندسية أثرت على جودة النموذج النهائي.

### 1. تحليل البيانات الاستكشافي (EDA)
استخدمنا الرسوم البيانية (Violin Plots) لفهم العلاقة بين كل ميزة والهدف (Churn).
* **اكتشاف رئيسي:** وجدنا أن العديد من الميزات لها علاقات **غير خطية** مع الهدف (مثل `Age`)، مما يعني أن النماذج الخطية مثل الانحدار اللوجيستي لن تكون كافية.
* **اكتشاف رئيسي:** اكتشفنا ميزات "فئوية" (Categorical) مموهة في شكل أرقام (مثل `Complaints` و `Status`)، والتي تبين أنها مؤشرات قوية جدًا.
* **اكتشاف رئيسي:** لاحظنا وجود "قيم متطرفة" (Outliers) واضحة (مثل `Seconds of Use`)، مما استدعى استخدام نموذج قوي ضدها مثل Random Forest.

### 2. النمذجة الأولية وتحديد المشاكل
* **الانحدار اللوجيستي:** أظهر مشكلة **"الارتباط المتعدد" (Multicollinearity)**. النموذج ارتبك وأعطى أهمية صفرية لميزة `Seconds of Use` بينما أعطى أهمية كبرى لميزة `Charge Amount` (رغم أنهما يقيسان نفس الشيء تقريبًا). هذا جعل تفسيره غير موثوق.
* **شجرة القرار (DTC):** حققت أداءً جيدًا (Test: 93.0%) ولكنها عانت من **Overfitting** حاد (Train: 99.4%).

### 3. القرار الهندسي: من "التقليم" إلى "الغابات"
* **التحدي:** عندما حاولنا "تقليم" (Pruning) شجرة القرار لحل الـ Overfitting، انخفض الأداء بشكل ملحوظ (Underfitting).
* **الحل:** قررنا أن "شجرة واحدة" ليست كافية. انتقلنا إلى نماذج "التجميع" (Ensemble).
* **النموذج الفائز:** تم اختيار **Random Forest** لأنه يجمع قوة مئات الأشجار مع تجنب الـ Overfitting، وحقق أفضل توازن بين الدقة (Accuracy: 98.6%) والتعميم (Gap: 1.4%).

### 4. التقييم النهائي والنشر
* **التقييم:** باستخدام مصفوفة الارتباك (Confusion Matrix)، وجدنا أن النموذج ممتاز، حيث "أمسك" بـ 98% من العملاء الذين كانوا سيغادرون بالفعل (Recall = 0.98).
* **النشر:** تم حفظ النموذج النهائي كملف `rf_churn_model.pkl` ليكون جاهزًا لعمليات التنبؤ الحية.

---

## 🚀 كيفية تشغيل المشروع

لتثبيت وتشغيل هذا المشروع محليًا، اتبع الخطوات التالية:

1.  **استنساخ المستودع (Clone):**
    ```bash
    git clone [https://github.com/your-username/your-project-repo.git](https://github.com/your-username/your-project-repo.git)
    cd your-project-repo
    ```

2.  **إعداد البيئة الافتراضية (Recommended):**
    ```bash
    python -m venv venv
    source venv/bin/activate  # (على Windows: venv\Scripts\activate)
    ```

3.  **تثبيت المتطلبات:**
    (نفترض وجود ملف `requirements.txt`)
    ```bash
    pip install -r requirements.txt
    ```

4.  **تشغيل التحليل (Jupyter Notebook):**
    للاطلاع على الخطوات الكاملة للتحليل والنمذجة:
    ```bash
    jupyter notebook Analysis.ipynb
    ```

5.  **تشغيل التنبؤ (Inference):**
    لاستخدام النموذج المدرب مسبقًا للتنبؤ بعملاء جدد، قم بتشغيل السكريبت (مثال):
    ```bash
    python predict.py
    ```

---

## ❤️ الدافع وراء المشروع

الدافع كان تجاوز "التحليل النظري" وبناء "أداة عملية". بدلاً من مجرد كتابة تقرير يقول "العملاء يغادرون بسبب الشكاوى"، أردت بناء نظام آلي يمكنه أن يخبر الشركة *"هذا العميل تحديدًا سيغادر الأسبوع المقبل بنسبة 78%، اذهب لإنقاذه الآن"*.

## 🧗 أبرز التحديات والحلول

واجه المشروع تحديين تقنيين رئيسيين:

1.  **التحدي: Overfitting (التعقيد الزائد) مقابل Underfitting (التبسيط الزائد).**
    * شجرة القرار (DTC) كانت معقدة جدًا (Overfit). محاولات تقليمها (Pruning) جعلتها بسيطة جدًا (Underfit)، مما أدى لانخفاض دقة الاختبار.
    * **الحل:** تم التغلب على هذه "المفاضلة" (Bias-Variance Trade-off) بالانتقال إلى نموذج **Random Forest**، الذي يقلل التباين (Variance) عن طريق "تصويت" مئات الأشجار، وبالتالي يحافظ على الدقة العالية دون Overfitting.

2.  **التحدي: الارتباط المتعدد (Multicollinearity) وتفسير النموذج.**
    * الانحدار اللوجيستي قدم نتائج مضللة حول أهمية الميزات (مثل تصفير `Seconds of Use`).
    * **الحل:** اعتمدنا على مقياس **`feature_importance_`** من Random Forest. هذا المقياس أكثر قوة ودقة، وأظهر بشكل صحيح أن `Seconds of Use` هي في الواقع ثالث أهم ميزة، مما أعطانا فهماً أعمق لسلوك العميل.

## 📊 النتائج والتأثير

المنتج النهائي هو نموذج تعلم آلي (`rf_churn_model.pkl`) يحقق النتائج التالية على بيانات الاختبار:

* **Accuracy (الدقة الإجمالية):** **98.6%**
* **Churn Recall (الأهم):** **98%** (النموذج ينجح في تحديد 98 من كل 100 عميل كانوا سيغادرون).
* **Churn Precision:** **93%** (عندما يقول النموذج "سيغادر"، يكون على حق 93% من الوقت).

**التأثير (الرؤى التجارية):**
أظهر تحليل أهمية الميزات أن مغادرة العملاء لا تتم بشكل عشوائي، بل تقودها عوامل واضحة:
1.  **تجربة سيئة:** `Complaints` (الشكاوى) و `Call Failure` (فشل المكالمات).
2.  **انخفاض الولاء:** `Seconds of Use` (انخفاض الاستخدام) و `Status` (الحالة غير نشطة).



[Image of Random Forest Feature Importances plot]


## 💡 الاستخدام المقصود

هذا النموذج مصمم لـ **فرق الاحتفاظ بالعملاء (Retention Teams)** وفريق التسويق.

يمكن للشركة تشغيل هذا النموذج يوميًا على قاعدة بيانات العملاء. أي عميل يحصل على تنبؤ `1` (Churn) باحتمالية عالية (مثل > 70%)، يتم تحويله تلقائيًا إلى فريق الدعم أو تقديم عرض خاص له، مما يحول عملية الاحتفاظ من "سلبية" إلى "استباقية".

## 🚧 القيود والتحسينات المستقبلية

* **القيود الحالية:**
    * النموذج يتنبأ **"هل"** سيغادر العميل، لكنه لا يفسر **"لماذا"** هذا العميل تحديدًا (Individual Prediction).

* **التحسينات المستقبلية:**
    * **تفسير التنبؤات (XAI):** استخدام مكتبات مثل `SHAP` أو `LIME` لتقديم تفسير لكل تنبؤ فردي (مثال: "هذا العميل سيغادر بسبب `Call Failure` العالية").
    * **النشر كـ API:** تحويل النموذج إلى REST API باستخدام `FastAPI` أو `Flask` لربطه مباشرة بـ CRM الخاص بالشركة.
    * **هندسة ميزات متقدمة:** تحليل نص الشكاوى (`Complaints`) باستخدام NLP كمدخل إضافي للنموذج.

---

## 📜 الحقوق والترخيص

-   **مصدر البيانات:** (Data Camp).
-   **الترخيص:** هذا المشروع مرخص تحت ترخيص **MIT License**.